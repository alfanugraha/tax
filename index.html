<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alfa Nugraha">

<title>Analisis Data PKB</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-8a79a254b8e706d3c925cde0a310d4f0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#i.-analisis-data-pkb" id="toc-i.-analisis-data-pkb" class="nav-link active" data-scroll-target="#i.-analisis-data-pkb">I. Analisis Data PKB</a>
  <ul class="collapse">
  <li><a href="#business-insight" id="toc-business-insight" class="nav-link" data-scroll-target="#business-insight">Business Insight</a></li>
  <li><a href="#praproses-data" id="toc-praproses-data" class="nav-link" data-scroll-target="#praproses-data">Praproses Data</a>
  <ul class="collapse">
  <li><a href="#pustaka-and-fungsi-diimpor" id="toc-pustaka-and-fungsi-diimpor" class="nav-link" data-scroll-target="#pustaka-and-fungsi-diimpor">1. Pustaka and fungsi diimpor</a></li>
  <li><a href="#data-dimuat" id="toc-data-dimuat" class="nav-link" data-scroll-target="#data-dimuat">2. Data dimuat</a></li>
  <li><a href="#data-dibersihkan" id="toc-data-dibersihkan" class="nav-link" data-scroll-target="#data-dibersihkan">3. Data dibersihkan</a></li>
  <li><a href="#data-digabungkan" id="toc-data-digabungkan" class="nav-link" data-scroll-target="#data-digabungkan">4. Data digabungkan</a></li>
  <li><a href="#rekayasa-fitur" id="toc-rekayasa-fitur" class="nav-link" data-scroll-target="#rekayasa-fitur">5. Rekayasa fitur</a></li>
  </ul></li>
  <li><a href="#exploratory-data-analysis" id="toc-exploratory-data-analysis" class="nav-link" data-scroll-target="#exploratory-data-analysis">Exploratory Data Analysis</a>
  <ul class="collapse">
  <li><a href="#analisis-univariate" id="toc-analisis-univariate" class="nav-link" data-scroll-target="#analisis-univariate">Analisis Univariate</a></li>
  <li><a href="#analisis-bivariate" id="toc-analisis-bivariate" class="nav-link" data-scroll-target="#analisis-bivariate">Analisis Bivariate</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#ii.-penggunaan-ai-machine-learning" id="toc-ii.-penggunaan-ai-machine-learning" class="nav-link" data-scroll-target="#ii.-penggunaan-ai-machine-learning">II. Penggunaan AI / Machine Learning</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Analisis Data PKB</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Alfa Nugraha </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="i.-analisis-data-pkb" class="level1">
<h1>I. Analisis Data PKB</h1>
<section id="business-insight" class="level2">
<h2 class="anchored" data-anchor-id="business-insight">Business Insight</h2>
<ul>
<li>Tren domisili, merk, dan jenis kendaraan bermotor terhadap kewajiban membayar pajak</li>
<li>Frekuensi pengguna kendaraan bermotor yang terlambat dan on time dalam kewajiban PKB</li>
</ul>
</section>
<section id="praproses-data" class="level2">
<h2 class="anchored" data-anchor-id="praproses-data">Praproses Data</h2>
<section id="pustaka-and-fungsi-diimpor" class="level3">
<h3 class="anchored" data-anchor-id="pustaka-and-fungsi-diimpor">1. Pustaka and fungsi diimpor</h3>
<p>Tahap awal praproses data adalah dengan memuat pustaka python yang dibutuhkan dan membuat <em>user-defined function</em> sebagai alat untuk inspeksi awal data.</p>
<div id="9726a211" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings <span class="im">as</span> wr</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>wr.filterwarnings(<span class="st">'ignore'</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> tree</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.tree <span class="im">import</span> DecisionTreeClassifier</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> show_data(df, row<span class="op">=</span><span class="dv">5</span>):</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f'ukuran data: </span><span class="sc">{</span>df<span class="sc">.</span>shape<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    display(df.head(row))</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_missing_data_summary(df):</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    temp <span class="op">=</span> df.isnull().<span class="bu">sum</span>().reset_index()</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    temp.columns <span class="op">=</span> [<span class="st">'col_name'</span>, <span class="st">'num_missing'</span>]</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    temp[<span class="st">'col_type'</span>] <span class="op">=</span> df.dtypes.values</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    temp <span class="op">=</span> temp.sort_values(by <span class="op">=</span> <span class="st">'num_missing'</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    temp[<span class="st">'num_missing_percent'</span>] <span class="op">=</span> <span class="bu">round</span>(temp[<span class="st">'num_missing'</span>] <span class="op">/</span> <span class="bu">len</span>(df) <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>)</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span>(temp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-dimuat" class="level3">
<h3 class="anchored" data-anchor-id="data-dimuat">2. Data dimuat</h3>
<div id="cfcf545b" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df_payment <span class="op">=</span> pd.read_csv(<span class="st">"dataset/pembayaran.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>show_data(df_payment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ukuran data: (3869, 4)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Nopol</th>
<th data-quarto-table-cell-role="th">Tgl Bayar</th>
<th data-quarto-table-cell-role="th">Bayar</th>
<th data-quarto-table-cell-role="th">Denda</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>B5944XYZ</td>
<td>2018-04-19</td>
<td>1525111</td>
<td>381277</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>B5944XYZ</td>
<td>2018-08-31</td>
<td>1525111</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>B5944XYZ</td>
<td>2020-01-03</td>
<td>1525111</td>
<td>381277</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>B5944XYZ</td>
<td>2020-10-05</td>
<td>1525111</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>B5944XYZ</td>
<td>2021-06-19</td>
<td>1525111</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="a6c14ddc" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mengubah tipe kolom tanggal bayar</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df_payment[<span class="st">'Tgl Bayar'</span>] <span class="op">=</span> pd.to_datetime(df_payment[<span class="st">'Tgl Bayar'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="9b9a9172" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>df_payment.nunique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>Nopol         950
Tgl Bayar    2150
Bayar         999
Denda         752
dtype: int64</code></pre>
</div>
</div>
<p>Data <code>pembayaran.csv</code> berisi 3869 data transaksi pembayaran pajak kendaraan bermotor dengan 4 atribut atau variabel sebagai berikut:</p>
<ol type="1">
<li><code>Nopol</code>: Nomor plat kendaraan bermotor</li>
<li><code>Tgl Bayar</code>: Tanggal pembayaran pajak kendaraan terkait</li>
<li><code>Bayar</code>: Nominal pembayaran berdasarkan PKB Pokok</li>
<li><code>Denda</code>: Nominal denda keterlambatan pembayaran PKB</li>
</ol>
<p>Dari seluruh amatan tersebut terdapat sejumlah <code>950</code> <strong>kendaraan bermotor unik</strong> yang telah melakukan transaksi.</p>
<div id="13246cf8" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>df_profil_op <span class="op">=</span> pd.read_csv(<span class="st">"dataset/profil_op.csv"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>show_data(df_profil_op)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ukuran data: (1000, 9)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Nopol</th>
<th data-quarto-table-cell-role="th">Domisili</th>
<th data-quarto-table-cell-role="th">Tgl Daftar</th>
<th data-quarto-table-cell-role="th">Tgl Keluar</th>
<th data-quarto-table-cell-role="th">Jenis Kendaraan</th>
<th data-quarto-table-cell-role="th">Merk Kendaraan</th>
<th data-quarto-table-cell-role="th">Tipe Kendaraan</th>
<th data-quarto-table-cell-role="th">Jenis Bahan Bakar</th>
<th data-quarto-table-cell-role="th">PKB Pokok</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>B1576XYZ</td>
<td>Bandung</td>
<td>2017-01-13</td>
<td>2017-03-14</td>
<td>Motor</td>
<td>Kawasaki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1425635</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>B5008XYZ</td>
<td>Bogor</td>
<td>2016-03-19</td>
<td>2020-07-14</td>
<td>Mobil</td>
<td>Toyota</td>
<td>SUV</td>
<td>n</td>
<td>1157953</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>B2905XYZ</td>
<td>Medan</td>
<td>2019-02-07</td>
<td>2024-04-30</td>
<td>Mobil</td>
<td>Daihatsu</td>
<td>SUV</td>
<td>n</td>
<td>882176</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>B3578XYZ</td>
<td>Bandung</td>
<td>2022-02-24</td>
<td>2023-04-04</td>
<td>Motor</td>
<td>Kawasaki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1626497</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="ac6c14be" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mengubah tipe kolom tanggal daftar dan keluar</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df_profil_op[<span class="st">'Tgl Daftar'</span>] <span class="op">=</span> pd.to_datetime(df_profil_op[<span class="st">'Tgl Daftar'</span>])</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>df_profil_op[<span class="st">'Tgl Keluar'</span>] <span class="op">=</span> pd.to_datetime(df_profil_op[<span class="st">'Tgl Keluar'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="b77722a7" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df_profil_op.nunique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>Nopol                950
Domisili               5
Tgl Daftar           840
Tgl Keluar           890
Jenis Kendaraan        2
Merk Kendaraan         8
Tipe Kendaraan         2
Jenis Bahan Bakar      6
PKB Pokok            999
dtype: int64</code></pre>
</div>
</div>
<p>Data <code>profil_op.csv</code> berisi 1000 amatan profil kendaraan bermotor dengan 9 atribut atau variabel sebagai berikut:</p>
<ol type="1">
<li><code>Nopol</code>: Nomor plat kendaraan bermotor</li>
<li><code>Domisili</code>: Tanggal pembayaran pajak kendaraan terkait</li>
<li><code>Tgl Daftar</code>: Tanggal kendaraan pertama kali terdaftar dalam sistem administrasi kendaraan bermotor</li>
<li><code>Tgl Keluar</code>: Tanggal kendaraan dihapus dari sistem</li>
<li><code>Jenis Kendaraan</code>: Jenis kendaraan Mobil atau Motor</li>
<li><code>Merk Kendaraan</code>: Merk kendaraan bermotor</li>
<li><code>Tipe Kendaraan</code>: Tipe kendaraan SUV atau Sport</li>
<li><code>Jenis Bahan Bakar</code>: Jenis bahan bakar kendaraan</li>
<li><code>PKB Pokok</code>: Nominal pajak kendaraan pokok</li>
</ol>
</section>
<section id="data-dibersihkan" class="level3">
<h3 class="anchored" data-anchor-id="data-dibersihkan">3. Data dibersihkan</h3>
<p>Pada kedua data tersebut dapat diidentifikasi atribut unik yang dapat digunakan untuk penggabungan data. Namun sebelum dan sesudah hal tersebut dilakukan perlu adanya:</p>
<ul>
<li>pemeriksaan ketepatan tanggal kendaraan terdaftar dan keluar</li>
<li>pemeriksaan duplikasi data, terutama pada <code>Nopol</code> dan <code>PKB Pokok</code> yang akan dijadikan <em>key</em> untuk join data.</li>
<li>pemeriksaan kategori pada atribut <code>Jenis Bahan Bakar</code></li>
<li>pemeriksaan ketepatan tanggal kendaraan terdaftar dan tanggal pembayaran pajak</li>
</ul>
<div id="46af7ace" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>df_profil_filtered <span class="op">=</span> df_profil_op[df_profil_op[<span class="st">'Tgl Daftar'</span>] <span class="op">&lt;=</span> df_profil_op[<span class="st">'Tgl Keluar'</span>]]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>show_data(df_profil_filtered)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ukuran data: (953, 9)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Nopol</th>
<th data-quarto-table-cell-role="th">Domisili</th>
<th data-quarto-table-cell-role="th">Tgl Daftar</th>
<th data-quarto-table-cell-role="th">Tgl Keluar</th>
<th data-quarto-table-cell-role="th">Jenis Kendaraan</th>
<th data-quarto-table-cell-role="th">Merk Kendaraan</th>
<th data-quarto-table-cell-role="th">Tipe Kendaraan</th>
<th data-quarto-table-cell-role="th">Jenis Bahan Bakar</th>
<th data-quarto-table-cell-role="th">PKB Pokok</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>B1576XYZ</td>
<td>Bandung</td>
<td>2017-01-13</td>
<td>2017-03-14</td>
<td>Motor</td>
<td>Kawasaki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1425635</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>B5008XYZ</td>
<td>Bogor</td>
<td>2016-03-19</td>
<td>2020-07-14</td>
<td>Mobil</td>
<td>Toyota</td>
<td>SUV</td>
<td>n</td>
<td>1157953</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>B2905XYZ</td>
<td>Medan</td>
<td>2019-02-07</td>
<td>2024-04-30</td>
<td>Mobil</td>
<td>Daihatsu</td>
<td>SUV</td>
<td>n</td>
<td>882176</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>B3578XYZ</td>
<td>Bandung</td>
<td>2022-02-24</td>
<td>2023-04-04</td>
<td>Motor</td>
<td>Kawasaki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1626497</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="ef0436ba" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>nopol <span class="op">=</span> df_profil_filtered[<span class="st">'Nopol'</span>]</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>duplicate_nopol <span class="op">=</span> pd.Series(nopol)[pd.Series(nopol).duplicated()].values</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>duplicate_nopol</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>array(['B7049XYZ', 'B5008XYZ', 'B6595XYZ', 'B6508XYZ', 'B4658XYZ',
       'B5948XYZ', 'B7329XYZ', 'B9269XYZ', 'B7012XYZ', 'B6689XYZ',
       'B4275XYZ', 'B5366XYZ', 'B1611XYZ', 'B3558XYZ', 'B2042XYZ',
       'B9337XYZ', 'B3975XYZ', 'B1502XYZ', 'B8227XYZ', 'B5209XYZ',
       'B2907XYZ', 'B1874XYZ', 'B3531XYZ', 'B9699XYZ', 'B7266XYZ',
       'B2042XYZ', 'B5882XYZ', 'B1631XYZ', 'B1874XYZ', 'B5667XYZ',
       'B1733XYZ', 'B9824XYZ', 'B9793XYZ', 'B7212XYZ', 'B3558XYZ',
       'B3795XYZ', 'B4552XYZ', 'B7413XYZ', 'B2746XYZ', 'B3462XYZ',
       'B7086XYZ', 'B9547XYZ', 'B8417XYZ', 'B2393XYZ'], dtype=object)</code></pre>
</div>
</div>
<div id="be6657ce" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Terdapat </span><span class="sc">{</span><span class="bu">len</span>(duplicate_nopol)<span class="sc">}</span><span class="ss"> duplikasi pada nopol'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Terdapat 44 duplikasi pada nopol</code></pre>
</div>
</div>
<div id="c7d9811e" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df_profil_filtered.groupby([<span class="st">'Jenis Bahan Bakar'</span>, <span class="st">'Jenis Kendaraan'</span>]).size().unstack(fill_value<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Jenis Kendaraan</th>
<th data-quarto-table-cell-role="th">Mobil</th>
<th data-quarto-table-cell-role="th">Motor</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Jenis Bahan Bakar</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">B</td>
<td>87</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Bensin</td>
<td>0</td>
<td>493</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">e</td>
<td>64</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">i</td>
<td>89</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">n</td>
<td>162</td>
<td>0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">s</td>
<td>58</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Terdapat beberapa kategori <code>Jenis Bahan Bakar</code> yang tidak teridentifikasi pada dataset dan semuanya masuk ke dalam kategori <code>Jenis Kendaraan</code> = <code>Mobil</code>, hanya kategori <code>Motor</code> yang dengan jelas menggunakan bahan bakar <code>Bensin</code>. Pada aspek ini tidak menjadi isu karena lebih mudah membedakannya dengan melihat jenis kendaraannya saja.</p>
<div id="8c74d97f" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>missing_df_payment <span class="op">=</span> get_missing_data_summary(df_payment)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>missing_df_payment</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">col_name</th>
<th data-quarto-table-cell-role="th">num_missing</th>
<th data-quarto-table-cell-role="th">col_type</th>
<th data-quarto-table-cell-role="th">num_missing_percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Nopol</td>
<td>0</td>
<td>object</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Tgl Bayar</td>
<td>0</td>
<td>datetime64[ns]</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Bayar</td>
<td>0</td>
<td>int64</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Denda</td>
<td>0</td>
<td>int64</td>
<td>0.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="9a97feeb" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>missing_df_profil <span class="op">=</span> get_missing_data_summary(df_profil_filtered)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>missing_df_profil</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">col_name</th>
<th data-quarto-table-cell-role="th">num_missing</th>
<th data-quarto-table-cell-role="th">col_type</th>
<th data-quarto-table-cell-role="th">num_missing_percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Nopol</td>
<td>0</td>
<td>object</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Domisili</td>
<td>0</td>
<td>object</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Tgl Daftar</td>
<td>0</td>
<td>datetime64[ns]</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Tgl Keluar</td>
<td>0</td>
<td>datetime64[ns]</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Jenis Kendaraan</td>
<td>0</td>
<td>object</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Merk Kendaraan</td>
<td>0</td>
<td>object</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Tipe Kendaraan</td>
<td>0</td>
<td>object</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Jenis Bahan Bakar</td>
<td>0</td>
<td>object</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>PKB Pokok</td>
<td>0</td>
<td>int64</td>
<td>0.0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Tabel ringkasan di atas menunjukkan bahwa tidak ada langkah lebih lanjut yang perlu dilakukan, karena kedua tabel tidak memiliki nilai yang hilang pada setiap atributnya.</p>
</section>
<section id="data-digabungkan" class="level3">
<h3 class="anchored" data-anchor-id="data-digabungkan">4. Data digabungkan</h3>
<div id="b338225c" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>df_merged <span class="op">=</span> df_profil_filtered.merge(df_payment, left_on <span class="op">=</span> [<span class="st">"Nopol"</span>, <span class="st">"PKB Pokok"</span>], right_on <span class="op">=</span> [<span class="st">"Nopol"</span>, <span class="st">"Bayar"</span>], how <span class="op">=</span> <span class="st">"left"</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>show_data(df_merged)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ukuran data: (3814, 12)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Nopol</th>
<th data-quarto-table-cell-role="th">Domisili</th>
<th data-quarto-table-cell-role="th">Tgl Daftar</th>
<th data-quarto-table-cell-role="th">Tgl Keluar</th>
<th data-quarto-table-cell-role="th">Jenis Kendaraan</th>
<th data-quarto-table-cell-role="th">Merk Kendaraan</th>
<th data-quarto-table-cell-role="th">Tipe Kendaraan</th>
<th data-quarto-table-cell-role="th">Jenis Bahan Bakar</th>
<th data-quarto-table-cell-role="th">PKB Pokok</th>
<th data-quarto-table-cell-role="th">Tgl Bayar</th>
<th data-quarto-table-cell-role="th">Bayar</th>
<th data-quarto-table-cell-role="th">Denda</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2018-04-19</td>
<td>1525111</td>
<td>381277</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2018-08-31</td>
<td>1525111</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2020-01-03</td>
<td>1525111</td>
<td>381277</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2020-10-05</td>
<td>1525111</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2021-06-19</td>
<td>1525111</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="979139dd" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>df_final <span class="op">=</span> df_merged[df_merged[<span class="st">'Tgl Daftar'</span>] <span class="op">&lt;=</span> df_merged[<span class="st">'Tgl Bayar'</span>]]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>show_data(df_final)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ukuran data: (3350, 12)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Nopol</th>
<th data-quarto-table-cell-role="th">Domisili</th>
<th data-quarto-table-cell-role="th">Tgl Daftar</th>
<th data-quarto-table-cell-role="th">Tgl Keluar</th>
<th data-quarto-table-cell-role="th">Jenis Kendaraan</th>
<th data-quarto-table-cell-role="th">Merk Kendaraan</th>
<th data-quarto-table-cell-role="th">Tipe Kendaraan</th>
<th data-quarto-table-cell-role="th">Jenis Bahan Bakar</th>
<th data-quarto-table-cell-role="th">PKB Pokok</th>
<th data-quarto-table-cell-role="th">Tgl Bayar</th>
<th data-quarto-table-cell-role="th">Bayar</th>
<th data-quarto-table-cell-role="th">Denda</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2018-04-19</td>
<td>1525111</td>
<td>381277</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2018-08-31</td>
<td>1525111</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2020-01-03</td>
<td>1525111</td>
<td>381277</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2020-10-05</td>
<td>1525111</td>
<td>0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2021-06-19</td>
<td>1525111</td>
<td>0</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="rekayasa-fitur" class="level3">
<h3 class="anchored" data-anchor-id="rekayasa-fitur">5. Rekayasa fitur</h3>
<p>Tahapan berikut ini dilakukan rekayasa fitur terhadap ketepatan pembayaran PKB dengan atribut <code>Status Denda</code> = <code>[Ontime, Denda]</code> beserta <code>Durasi Keterlambatan</code>.</p>
<div id="0f937dbf" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>df_final[<span class="st">'Status Denda'</span>] <span class="op">=</span> np.where(df_final[<span class="st">'Denda'</span>] <span class="op">==</span> <span class="dv">0</span>, <span class="st">"Ontime"</span>, <span class="st">"Denda"</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>df_final[<span class="st">'Durasi Keterlambatan'</span>] <span class="op">=</span> np.where(df_final[<span class="st">'Denda'</span>] <span class="op">==</span> <span class="dv">0</span>, </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>                                            df_final[<span class="st">'Tgl Daftar'</span>] <span class="op">-</span> df_final[<span class="st">'Tgl Daftar'</span>], </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>                                            df_final[<span class="st">'Tgl Bayar'</span>] <span class="op">-</span> df_final[<span class="st">'Tgl Daftar'</span>])</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>show_data(df_final)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ukuran data: (3350, 14)</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Nopol</th>
<th data-quarto-table-cell-role="th">Domisili</th>
<th data-quarto-table-cell-role="th">Tgl Daftar</th>
<th data-quarto-table-cell-role="th">Tgl Keluar</th>
<th data-quarto-table-cell-role="th">Jenis Kendaraan</th>
<th data-quarto-table-cell-role="th">Merk Kendaraan</th>
<th data-quarto-table-cell-role="th">Tipe Kendaraan</th>
<th data-quarto-table-cell-role="th">Jenis Bahan Bakar</th>
<th data-quarto-table-cell-role="th">PKB Pokok</th>
<th data-quarto-table-cell-role="th">Tgl Bayar</th>
<th data-quarto-table-cell-role="th">Bayar</th>
<th data-quarto-table-cell-role="th">Denda</th>
<th data-quarto-table-cell-role="th">Status Denda</th>
<th data-quarto-table-cell-role="th">Durasi Keterlambatan</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2018-04-19</td>
<td>1525111</td>
<td>381277</td>
<td>Denda</td>
<td>328 days</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2018-08-31</td>
<td>1525111</td>
<td>0</td>
<td>Ontime</td>
<td>0 days</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2020-01-03</td>
<td>1525111</td>
<td>381277</td>
<td>Denda</td>
<td>952 days</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2020-10-05</td>
<td>1525111</td>
<td>0</td>
<td>Ontime</td>
<td>0 days</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>B5944XYZ</td>
<td>Jakarta</td>
<td>2017-05-26</td>
<td>2022-06-30</td>
<td>Motor</td>
<td>Suzuki</td>
<td>Sport</td>
<td>Bensin</td>
<td>1525111</td>
<td>2021-06-19</td>
<td>1525111</td>
<td>0</td>
<td>Ontime</td>
<td>0 days</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="exploratory-data-analysis">Exploratory Data Analysis</h2>
<section id="analisis-univariate" class="level3">
<h3 class="anchored" data-anchor-id="analisis-univariate">Analisis Univariate</h3>
<div id="0d0f71ba" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>domisili_counts <span class="op">=</span> df_final[<span class="st">'Domisili'</span>].value_counts()</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>plt.bar(domisili_counts.index, domisili_counts)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Domisili Pembayar PKB'</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Kota'</span>)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Total'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>Text(0, 0.5, 'Total')</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-18-output-2.png" width="667" height="523" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="a4409b99" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>merk_counts <span class="op">=</span> df_final[<span class="st">'Merk Kendaraan'</span>].value_counts()</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>plt.bar(merk_counts.index, merk_counts)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Merk Kendaraan Pembayar PKB'</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Merk Kendaraan'</span>)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Total'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>Text(0, 0.5, 'Total')</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-19-output-2.png" width="667" height="523" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="333cb7ed" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>jenis_counts <span class="op">=</span> df_final[<span class="st">'Jenis Kendaraan'</span>].value_counts()</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>plt.bar(jenis_counts.index, jenis_counts)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Jenis Kendaraan Pembayar PKB'</span>)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'Jenis Kendaraan'</span>)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'Total'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>Text(0, 0.5, 'Total')</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-20-output-2.png" width="676" height="523" class="figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="analisis-bivariate" class="level3">
<h3 class="anchored" data-anchor-id="analisis-bivariate">Analisis Bivariate</h3>
<div id="4b8f5279" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>pd.crosstab(df_final[<span class="st">'Status Denda'</span>], df_final[<span class="st">'Domisili'</span>], margins <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Domisili</th>
<th data-quarto-table-cell-role="th">Bandung</th>
<th data-quarto-table-cell-role="th">Bogor</th>
<th data-quarto-table-cell-role="th">Jakarta</th>
<th data-quarto-table-cell-role="th">Medan</th>
<th data-quarto-table-cell-role="th">Surabaya</th>
<th data-quarto-table-cell-role="th">All</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Status Denda</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Denda</td>
<td>287</td>
<td>275</td>
<td>264</td>
<td>299</td>
<td>320</td>
<td>1445</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ontime</td>
<td>374</td>
<td>390</td>
<td>313</td>
<td>412</td>
<td>416</td>
<td>1905</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">All</td>
<td>661</td>
<td>665</td>
<td>577</td>
<td>711</td>
<td>736</td>
<td>3350</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="c4f6e11b" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>pd.crosstab(df_final[<span class="st">'Status Denda'</span>], df_final[<span class="st">'Merk Kendaraan'</span>], margins <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="44">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Merk Kendaraan</th>
<th data-quarto-table-cell-role="th">Daihatsu</th>
<th data-quarto-table-cell-role="th">Ford</th>
<th data-quarto-table-cell-role="th">Honda</th>
<th data-quarto-table-cell-role="th">Kawasaki</th>
<th data-quarto-table-cell-role="th">Mitsubishi</th>
<th data-quarto-table-cell-role="th">Suzuki</th>
<th data-quarto-table-cell-role="th">Toyota</th>
<th data-quarto-table-cell-role="th">Yamaha</th>
<th data-quarto-table-cell-role="th">All</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Status Denda</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Denda</td>
<td>189</td>
<td>169</td>
<td>229</td>
<td>150</td>
<td>164</td>
<td>198</td>
<td>174</td>
<td>172</td>
<td>1445</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ontime</td>
<td>217</td>
<td>239</td>
<td>271</td>
<td>210</td>
<td>211</td>
<td>272</td>
<td>257</td>
<td>228</td>
<td>1905</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">All</td>
<td>406</td>
<td>408</td>
<td>500</td>
<td>360</td>
<td>375</td>
<td>470</td>
<td>431</td>
<td>400</td>
<td>3350</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="73ac6b8c" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>pd.crosstab(df_final[<span class="st">'Status Denda'</span>], df_final[<span class="st">'Jenis Kendaraan'</span>], margins <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="45">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Jenis Kendaraan</th>
<th data-quarto-table-cell-role="th">Mobil</th>
<th data-quarto-table-cell-role="th">Motor</th>
<th data-quarto-table-cell-role="th">All</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Status Denda</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Denda</td>
<td>696</td>
<td>749</td>
<td>1445</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">Ontime</td>
<td>924</td>
<td>981</td>
<td>1905</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">All</td>
<td>1620</td>
<td>1730</td>
<td>3350</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
</section>
<section id="ii.-penggunaan-ai-machine-learning" class="level1">
<h1>II. Penggunaan AI / Machine Learning</h1>
<p>Penerapan Machine Learning pada data di atas dapat menjadi nilai tambah untuk melihat bagaimana tren pelaku pembayaran pajak pada umumnya. Teknik Machine Learning yang digunakan pada kasus ini juga bervariasi, contoh sederhana yang dapat digunakan adalah Pohon Keputusan. Berikut langkah yang harus dipersiapkan:</p>
<div id="a0119c91" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>df_ml <span class="op">=</span> df_final</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>features <span class="op">=</span> [<span class="st">'Domisili'</span>, <span class="st">'Jenis Kendaraan'</span>]</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>d1 <span class="op">=</span> {<span class="st">'Bandung'</span>: <span class="dv">0</span>, <span class="st">'Bogor'</span>: <span class="dv">1</span>, <span class="st">'Jakarta'</span>: <span class="dv">2</span>, <span class="st">'Medan'</span>: <span class="dv">3</span>, <span class="st">'Surabaya'</span>: <span class="dv">4</span>}</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>d2 <span class="op">=</span> {<span class="st">'Daihatsu'</span>: <span class="dv">0</span>, <span class="st">'Ford'</span>: <span class="dv">1</span>, <span class="st">'Honda'</span>: <span class="dv">2</span>, <span class="st">'Kawasaki'</span>: <span class="dv">3</span>, <span class="st">'Mitsubishi'</span>: <span class="dv">4</span>, <span class="st">'Suzuki'</span>: <span class="dv">5</span>, <span class="st">'Toyota'</span>: <span class="dv">6</span>, <span class="st">'Yamaha'</span>: <span class="dv">7</span>}</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> {<span class="st">'Mobil'</span>: <span class="dv">0</span>, <span class="st">'Motor'</span>: <span class="dv">1</span>}</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>d4 <span class="op">=</span> {<span class="st">'Denda'</span>: <span class="dv">0</span>, <span class="st">'Ontime'</span>: <span class="dv">1</span>}</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>df_ml[<span class="st">'Jenis Kendaraan'</span>] <span class="op">=</span> df_ml[<span class="st">'Jenis Kendaraan'</span>].<span class="bu">map</span>(d3)</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>df_ml[<span class="st">'Merk Kendaraan'</span>] <span class="op">=</span> df_ml[<span class="st">'Merk Kendaraan'</span>].<span class="bu">map</span>(d2)</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>df_ml[<span class="st">'Domisili'</span>] <span class="op">=</span> df_ml[<span class="st">'Domisili'</span>].<span class="bu">map</span>(d1)</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>df_ml[<span class="st">'Status Denda'</span>] <span class="op">=</span> df_ml[<span class="st">'Status Denda'</span>].<span class="bu">map</span>(d4)</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> df_ml[features]</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> df_ml[<span class="st">'Status Denda'</span>]</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>dtree <span class="op">=</span> DecisionTreeClassifier()</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>dtree <span class="op">=</span> dtree.fit(X, y)</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>tree.plot_tree(dtree, feature_names <span class="op">=</span> features)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>[Text(0.4342105263157895, 0.9, 'Domisili &lt;= 1.5\ngini = 0.491\nsamples = 3350\nvalue = [1445.0, 1905.0]'),
 Text(0.21052631578947367, 0.7, 'Jenis Kendaraan &lt;= 0.5\ngini = 0.488\nsamples = 1326\nvalue = [562.0, 764.0]'),
 Text(0.3223684210526316, 0.8, 'True  '),
 Text(0.10526315789473684, 0.5, 'Domisili &lt;= 0.5\ngini = 0.483\nsamples = 633\nvalue = [258, 375]'),
 Text(0.05263157894736842, 0.3, 'gini = 0.487\nsamples = 318\nvalue = [133, 185]'),
 Text(0.15789473684210525, 0.3, 'gini = 0.479\nsamples = 315\nvalue = [125, 190]'),
 Text(0.3157894736842105, 0.5, 'Domisili &lt;= 0.5\ngini = 0.492\nsamples = 693\nvalue = [304, 389]'),
 Text(0.2631578947368421, 0.3, 'gini = 0.495\nsamples = 343\nvalue = [154.0, 189.0]'),
 Text(0.3684210526315789, 0.3, 'gini = 0.49\nsamples = 350\nvalue = [150, 200]'),
 Text(0.6578947368421053, 0.7, 'Domisili &lt;= 2.5\ngini = 0.492\nsamples = 2024\nvalue = [883, 1141]'),
 Text(0.5460526315789473, 0.8, '  False'),
 Text(0.5263157894736842, 0.5, 'Jenis Kendaraan &lt;= 0.5\ngini = 0.496\nsamples = 577\nvalue = [264, 313]'),
 Text(0.47368421052631576, 0.3, 'gini = 0.499\nsamples = 290\nvalue = [140, 150]'),
 Text(0.5789473684210527, 0.3, 'gini = 0.491\nsamples = 287\nvalue = [124, 163]'),
 Text(0.7894736842105263, 0.5, 'Domisili &lt;= 3.5\ngini = 0.49\nsamples = 1447\nvalue = [619, 828]'),
 Text(0.6842105263157895, 0.3, 'Jenis Kendaraan &lt;= 0.5\ngini = 0.487\nsamples = 711\nvalue = [299, 412]'),
 Text(0.631578947368421, 0.1, 'gini = 0.488\nsamples = 349\nvalue = [148, 201]'),
 Text(0.7368421052631579, 0.1, 'gini = 0.486\nsamples = 362\nvalue = [151, 211]'),
 Text(0.8947368421052632, 0.3, 'Jenis Kendaraan &lt;= 0.5\ngini = 0.491\nsamples = 736\nvalue = [320.0, 416.0]'),
 Text(0.8421052631578947, 0.1, 'gini = 0.49\nsamples = 348\nvalue = [150, 198]'),
 Text(0.9473684210526315, 0.1, 'gini = 0.492\nsamples = 388\nvalue = [170, 218]')]</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/cell-24-output-2.png" width="540" height="389" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Pada hasil simulasi di atas terlihat bahwa akar atau titik awal pohon keputusan adalah <code>Domisili</code> dimana atribut ini dapat disimpulkan sebagai atribut yang paling signifikan dalam mempartisi data. Kemudian pada setiap simpul (<code>Node</code>), <code>Domisili</code> dan <code>Jenis Kendaraan</code> juga mendominasi dalam pembagian cabang dalam menentukan bagaimana kedisiplinan pemilik kendaraan bermotor dalam membayar pajak dalam hal ini <code>Ontime</code> dan terlambat (<code>Denda</code>).</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>